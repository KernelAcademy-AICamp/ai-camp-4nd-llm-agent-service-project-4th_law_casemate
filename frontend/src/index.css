@tailwind base;
@tailwind components;
@tailwind utilities;

@custom-variant dark (&:is(.dark *));

:root {
  /* ═══════════════════════════════════════════════════════════════
     CaseMate Design System — Floating UI Language
     "조용하고 정제된 전문성, 공간 안에 떠 있는 인터페이스"
     ═══════════════════════════════════════════════════════════════ */

  /* ─── Core Palette ─── */
  --background: #F8F9FC;
  --foreground: #1E293B;
  --card: #FFFFFF;
  --card-foreground: #1E293B;
  --popover: #FFFFFF;
  --popover-foreground: #1E293B;
  --primary: #6D5EF5;
  --primary-foreground: #FFFFFF;
  --secondary: #F8F7FF;
  --secondary-foreground: #1E293B;
  --muted: #F1F5F9;
  --muted-foreground: #64748B;
  --accent: #F1F0FF;
  --accent-foreground: #1E293B;
  --destructive: #EF4444;
  --destructive-foreground: #FFFFFF;
  --border: #E8ECF4;
  --input: #E8ECF4;
  --ring: #6D5EF5;
  --chart-1: #6D5EF5;
  --chart-2: #22C55E;
  --chart-3: #F59E0B;
  --chart-4: #A78BFA;
  --chart-5: #38BDF8;

  /* ─── Spatial System: Radius ─── */
  /* 더 둥글고 부드러운 형태 */
  --radius: 0.875rem;
  --radius-sm: 0.5rem;
  --radius-lg: 1.25rem;
  --radius-xl: 1.5rem;
  --radius-full: 9999px;

  /* ─── Sidebar: Floating Panel ─── */
  --sidebar: #FFFFFF;
  --sidebar-foreground: #1E293B;
  --sidebar-primary: #F8F7FF;
  --sidebar-primary-foreground: #1E293B;
  --sidebar-accent: #F1F0FF;
  --sidebar-accent-foreground: #1E293B;
  --sidebar-border: #EEF2FF;
  --sidebar-ring: #6D5EF5;

  /* ─── Status: Muted Tones ─── */
  --success: #10B981;
  --success-foreground: #FFFFFF;
  --warning: #F59E0B;
  --warning-foreground: #FFFFFF;

  /* ─── Extended Palette ─── */
  --primary-dark: #4F46E5;
  --primary-soft: #EDE9FE;
  --primary-muted: #F5F3FF;
  --glow: #C4B5FD;
  --info: #38BDF8;
  --info-foreground: #FFFFFF;
  --text-light: #94A3B8;
  --text-muted: #64748B;
  --soft-border: #F1F5F9;

  /* ─── Surface Layers: Depth Hierarchy ─── */
  /* 배경보다 살짝 밝은 표면들 - 떠있는 느낌 */
  --surface-0: #F8F9FC;
  --surface-1: #FFFFFF;
  --surface-2: #FEFEFF;
  --surface-3: #FBFBFF;
  --surface-elevated: #FFFFFF;

  /* ─── Shadow System: Visible Depth ─── */
  --shadow-color: 230 40% 60%;
  --shadow-xs: 0 1px 3px hsl(var(--shadow-color) / 0.06);
  --shadow-sm: 0 2px 8px -2px hsl(var(--shadow-color) / 0.10),
               0 1px 3px -1px hsl(var(--shadow-color) / 0.06);
  --shadow-md: 0 4px 16px -4px hsl(var(--shadow-color) / 0.12),
               0 2px 6px -2px hsl(var(--shadow-color) / 0.08);
  --shadow-lg: 0 8px 30px -6px hsl(var(--shadow-color) / 0.16),
               0 4px 12px -4px hsl(var(--shadow-color) / 0.10);
  --shadow-xl: 0 20px 50px -12px hsl(var(--shadow-color) / 0.20),
               0 8px 20px -8px hsl(var(--shadow-color) / 0.12);
  /* Floating panel shadow */
  --shadow-float: 0 8px 40px -8px hsl(var(--shadow-color) / 0.18),
                  0 4px 16px -4px hsl(var(--shadow-color) / 0.10);
  --shadow-glow: 0 0 24px -4px hsl(250 60% 65% / 0.30);
  --shadow-glow-primary: 0 4px 20px -4px rgba(109, 94, 245, 0.35);

  /* ─── Gradient System ─── */
  --gradient-start: #FBFBFF;
  --gradient-end: #F5F3FF;
  --gradient-subtle: linear-gradient(135deg, var(--gradient-start) 0%, var(--gradient-end) 100%);

  /* ─── Spacing Scale (참조용) ─── */
  --space-xs: 0.25rem;
  --space-sm: 0.5rem;
  --space-md: 1rem;
  --space-lg: 1.5rem;
  --space-xl: 2rem;
  --space-2xl: 3rem;
  --space-section: 2.5rem;

  /* ─── Typography Scale ─── */
  --font-size-xs: 0.75rem;
  --font-size-sm: 0.8125rem;
  --font-size-base: 0.875rem;
  --font-size-md: 0.9375rem;
  --font-size-lg: 1.0625rem;
  --font-size-xl: 1.25rem;
  --font-size-2xl: 1.5rem;
  --font-size-3xl: 1.875rem;
  --line-height-tight: 1.25;
  --line-height-snug: 1.375;
  --line-height-normal: 1.5;
  --line-height-relaxed: 1.625;
  --letter-spacing-tight: -0.02em;
  --letter-spacing-normal: 0;
  --letter-spacing-wide: 0.02em;

  /* ─── Transition System ─── */
  --transition-fast: 120ms ease-out;
  --transition-base: 180ms ease-out;
  --transition-slow: 280ms ease-out;
  --transition-spring: 300ms cubic-bezier(0.34, 1.56, 0.64, 1);
}

.dark {
  /* Dark mode - purple-tinted dark theme */
  --background: #0F0D1A;
  --foreground: #F8FAFC;
  --card: #1A1625;
  --card-foreground: #F8FAFC;
  --popover: #1A1625;
  --popover-foreground: #F8FAFC;
  --primary: #A78BFA;
  --primary-foreground: #0F0D1A;
  --secondary: #2D2640;
  --secondary-foreground: #F8FAFC;
  --muted: #2D2640;
  --muted-foreground: #94A3B8;
  --accent: #2D2640;
  --accent-foreground: #F8FAFC;
  --destructive: #EF4444;
  --destructive-foreground: #0F0D1A;
  --border: #3D3555;
  --input: #2D2640;
  --ring: #A78BFA;
  --chart-1: #A78BFA;
  --chart-2: #4ADE80;
  --chart-3: #FBBF24;
  --chart-4: #C4B5FD;
  --chart-5: #7DD3FC;
  --sidebar: #1A1625;
  --sidebar-foreground: #F8FAFC;
  --sidebar-primary: #2D2640;
  --sidebar-primary-foreground: #F8FAFC;
  --sidebar-accent: #2D2640;
  --sidebar-accent-foreground: #F8FAFC;
  --sidebar-border: #3D3555;
  --sidebar-ring: #A78BFA;
  --success: #4ADE80;
  --success-foreground: #0F0D1A;
  --warning: #FBBF24;
  --warning-foreground: #0F0D1A;
  /* New tokens for CaseMate */
  --primary-dark: #8B5CF6;
  --primary-soft: #2D2640;
  --glow: #6D5EF5;
  --info: #7DD3FC;
  --info-foreground: #0F0D1A;
  --text-light: #64748B;
  --soft-border: #2D2640;
  /* Surface layers for depth */
  --surface-1: #1A1625;
  --surface-2: #1F1A2E;
  --surface-3: #2D2640;
  /* Semantic shadows */
  --shadow-color: 260 50% 30%;
  --shadow-sm: 0 1px 2px hsl(var(--shadow-color) / 0.2);
  --shadow-md: 0 4px 12px hsl(var(--shadow-color) / 0.25);
  --shadow-lg: 0 8px 24px hsl(var(--shadow-color) / 0.3);
  /* Gradient stops */
  --gradient-start: #1A1625;
  --gradient-end: #0F0D1A;
}

@layer base {
  * {
    @apply border-border;
  }


  body {
    @apply text-foreground antialiased;
    font-feature-settings: "cv02", "cv03", "cv04", "cv11";
    background: linear-gradient(180deg, #FBFBFF 0%, #F5F3FF 40%, #EEF2FF 100%);
    background-attachment: fixed;
    min-height: 100vh;
  }

  ::selection {
    background-color: color-mix(in srgb, var(--primary) 15%, transparent);
    color: var(--foreground);
  }

  ::-webkit-scrollbar { width: 6px; height: 6px; }
  ::-webkit-scrollbar-track { background: transparent; }
  ::-webkit-scrollbar-thumb {
    background: color-mix(in srgb, var(--muted-foreground) 25%, transparent);
    border-radius: 3px;
  }
  ::-webkit-scrollbar-thumb:hover {
    background: color-mix(in srgb, var(--muted-foreground) 40%, transparent);
  }
}

@layer components {

  /* Refined card hover states */
  .card-interactive {
    @apply transition-all duration-200;
    box-shadow: var(--shadow-sm);
  }
  .card-interactive:hover {
    box-shadow: var(--shadow-md);
    border-color: var(--primary-soft);
  }

  /* Subtle section dividers */
  .section-divider {
    @apply border-t border-border/60;
  }

  /* Subtle gradient backgrounds */
  .bg-gradient-subtle {
    background: linear-gradient(135deg, var(--gradient-start) 0%, var(--gradient-end) 100%);
  }

  /* Primary glow effect - for focus states */
  .glow-primary {
    box-shadow: 0 0 0 3px color-mix(in srgb, var(--primary) 15%, transparent);
  }

  /* Elevated card with shadow */
  .card-elevated {
    background: var(--surface-1);
    box-shadow: var(--shadow-md);
    border: 1px solid var(--soft-border);
  }

  /* Surface utilities */
  .surface-1 { background: var(--surface-1); }
  .surface-2 { background: var(--surface-2); }
  .surface-3 { background: var(--surface-3); }

  /* Soft hover for list items */
  .hover-soft {
    @apply transition-colors duration-150;
  }
  .hover-soft:hover {
    background: var(--accent);
  }

  /* Focus ring with brand color */
  .focus-ring-primary:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px var(--background), 0 0 0 4px var(--primary);
  }

  /* ─── Premium Card System ─── */
  .card-hover-lift {
    @apply transition-all duration-300 ease-out;
    box-shadow: var(--shadow-sm);
  }
  .card-hover-lift:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
  }

  /* Primary button glow */
  .btn-glow {
    box-shadow: var(--shadow-glow-primary);
  }
  .btn-glow:hover {
    box-shadow: 0 6px 28px -4px rgba(109, 94, 245, 0.45);
  }

  /* Glass morphism panel */
  .glass-panel {
    background: rgba(255, 255, 255, 0.85);
    backdrop-filter: blur(16px) saturate(180%);
    -webkit-backdrop-filter: blur(16px) saturate(180%);
  }

  /* Gradient accent strip on top of card */
  .accent-top-strip {
    position: relative;
    overflow: hidden;
  }
  .accent-top-strip::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, #6D5EF5, #A78BFA);
    border-radius: 3px 3px 0 0;
  }

  /* Decorative gradient orb */
  .gradient-orb {
    position: absolute;
    border-radius: 50%;
    filter: blur(80px);
    pointer-events: none;
  }

  /* Typing indicator bounce */
  @keyframes typing-bounce {
    0%, 60%, 100% { transform: translateY(0); }
    30% { transform: translateY(-6px); }
  }
  .typing-dot {
    animation: typing-bounce 1.4s ease-in-out infinite;
  }
  .typing-dot:nth-child(2) { animation-delay: 0.15s; }
  .typing-dot:nth-child(3) { animation-delay: 0.3s; }

  /* Auth page — wave drift */
  @keyframes wave-drift {
    0% { transform: translateX(0); }
    100% { transform: translateX(-50%); }
  }
}

/* ─── Agent Loading: Particle Orb ─── */

/* 파티클 궤도 회전 */
@keyframes agent-orbit {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* 파티클 숨쉬기 (모였다 흩어지는 느낌) */
@keyframes agent-particle-breathe {
  0%, 100% { opacity: 0.3; transform: scale(0.6) translateY(0); }
  30% { opacity: 1; transform: scale(1.2) translateY(-2px); }
  70% { opacity: 0.8; transform: scale(1) translateY(1px); }
}
.agent-particle-breathe {
  animation: agent-particle-breathe 2.4s ease-in-out infinite;
}

/* 코어 글로우 (중앙 고정, 숨쉬는 빛) */
@keyframes agent-core-breathe {
  0%, 100% {
    width: 6px; height: 6px;
    box-shadow: 0 0 12px 4px rgba(109, 94, 245, 0.3),
                0 0 30px 10px rgba(109, 94, 245, 0.1);
    opacity: 0.6;
  }
  50% {
    width: 8px; height: 8px;
    box-shadow: 0 0 18px 6px rgba(109, 94, 245, 0.5),
                0 0 40px 16px rgba(109, 94, 245, 0.15);
    opacity: 1;
  }
}
.agent-core-glow {
  width: 6px; height: 6px;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(167, 139, 250, 0.9), rgba(109, 94, 245, 0.5));
  animation: agent-core-breathe 3s ease-in-out infinite;
}

/* task 슬라이드업 */
@keyframes agent-slide-up {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}
.agent-slide-up { animation: agent-slide-up 0.35s ease-out forwards; }

/* 진행 중 도트 */
@keyframes agent-dot-pulse {
  0%, 100% { opacity: 0.4; transform: scale(0.8); }
  50% { opacity: 1; transform: scale(1.3); }
}
.agent-dot-pulse { animation: agent-dot-pulse 1.4s ease-in-out infinite; }

/* 날짜 입력 달력 아이콘 우측 끝 배치 */
input[type="date"] {
  position: relative !important;
  padding-right: 2.5rem !important;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%2364748B' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M8 2v4'/%3E%3Cpath d='M16 2v4'/%3E%3Crect width='18' height='18' x='3' y='4' rx='2'/%3E%3Cpath d='M3 10h18'/%3E%3C/svg%3E");
  background-repeat: no-repeat !important;
  background-position: right 0.75rem center !important;
  background-size: 1rem 1rem !important;
}

input[type="date"]::-webkit-calendar-picker-indicator {
  opacity: 0 !important;
  position: absolute !important;
  right: 0 !important;
  top: 0 !important;
  width: 2.5rem !important;
  height: 100% !important;
  cursor: pointer !important;
}

/* 분석 stale 알림 말풍선 애니메이션 */
@keyframes stale-popup-in {
  0% {
    opacity: 0;
    transform: translateX(-50%) translateY(6px) scale(0.96);
  }
  100% {
    opacity: 1;
    transform: translateX(-50%) translateY(0) scale(1);
  }
}
