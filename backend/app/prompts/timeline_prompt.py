"""
타임라인 자동 생성을 위한 프롬프트
"""

TIMELINE_GENERATION_PROMPT = """당신은 법률 사건의 타임라인을 분석하고 구조화하는 전문가입니다.

다음 사건 정보를 바탕으로 시간순으로 발생한 주요 이벤트들을 타임라인으로 정리해주세요.

## 사건 정보

### 사건 요약
{summary}

### 사실관계
{facts}

### 청구 내용
{claims}

### 증거 목록
{evidence_list}

## 작업 지침

1. 위 정보에서 **구체적인 날짜/시간 정보가 있는 이벤트**를 추출하세요
2. 날짜가 명시되지 않았지만 중요한 이벤트는 "날짜 미상"으로 표시하세요
3. 각 이벤트는 다음 기준으로 분류하세요:
   - "의뢰인": 의뢰인(피해자)가 취한 행동
   - "상대방": 상대방(피고소인/가해자)의 행동
   - "증거": 증거 확보/발견 관련
   - "기타": 법률 상담, 소송 제기 등 기타 사건
4. **각 이벤트의 description에는 다음을 포함하세요:**
   - 구체적인 상황 설명 (누가, 무엇을, 어디서, 어떻게)
   - 해당 이벤트와 관련된 **주요 쟁점사항** (법률적으로 중요한 포인트, 성립 요건, 문제점 등)
   - 쟁점사항은 "[쟁점]" 표시와 함께 명확히 기술
5. 시간순으로 정렬하세요 (오래된 것부터)

## 응답 형식

반드시 아래 JSON 배열 형식으로만 응답하세요. 다른 설명이나 텍스트를 추가하지 마세요.

```json
[
  {{
    "date": "2025-11-15",
    "time": "09:30",
    "title": "이벤트 제목 (간단명료하게)",
    "description": "구체적인 상황 설명 (누가, 무엇을, 어디서, 어떻게). [쟁점] 해당 이벤트와 관련된 법률적 쟁점사항 (성립 요건, 문제점 등)",
    "type": "의뢰인" | "상대방" | "증거" | "기타",
    "actor": "관련 인물명 또는 증거명"
  }}
]
```

## 날짜 형식 규칙
- date: YYYY-MM-DD 형식 (예: 2025-11-15)
- time: HH:MM 형식 (예: 14:30), 시간을 모르면 "00:00"
- 날짜를 모르면 date는 "미상", time은 "00:00"

## 예시
```json
[
  {{
    "date": "2025-11-15",
    "time": "09:30",
    "title": "단톡방 첫 비방 발언",
    "description": "피고소인 박OO가 34명 단체 카카오톡 채팅방에서 의뢰인에 대해 '업무능력이 없다'는 발언을 최초로 함. [쟁점] 명예훼손죄의 '사실 적시' 요건 충족 여부 및 '공연성' 성립 여부 (다수가 인식할 수 있는 상태)",
    "type": "상대방",
    "actor": "박OO (피고소인)"
  }},
  {{
    "date": "2025-11-15",
    "time": "14:32",
    "title": "단톡방 대화 캡처 확보",
    "description": "의뢰인이 명예훼손 발언이 담긴 카카오톡 대화를 캡처하여 증거로 확보. [쟁점] 디지털 증거의 증거능력 인정 여부 및 진정성립 입증 방법",
    "type": "증거",
    "actor": "카카오톡 대화 캡처본"
  }}
]
```

이제 위 사건 정보를 바탕으로 타임라인 JSON을 생성해주세요:
"""


def create_timeline_prompt(summary: str, facts: str, claims: str, evidence_list: str) -> str:
    """
    타임라인 생성 프롬프트 생성

    Args:
        summary: 사건 요약
        facts: 사실관계
        claims: 청구 내용
        evidence_list: 증거 목록 (텍스트)

    Returns:
        완성된 프롬프트
    """
    return TIMELINE_GENERATION_PROMPT.format(
        summary=summary or "없음",
        facts=facts or "없음",
        claims=claims or "없음",
        evidence_list=evidence_list or "없음"
    )
